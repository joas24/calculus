<!DOCTYPE html>
<html>

<head>
    <title>미적분</title>

    <script>
        var gyesoo = new Array;
        var chasoo = new Array;
        var hang = new Array;
        

        var arrange = function () {               //정렬 함수
            var arr = document.getElementById('input').value.split("+");     //arr에 +문자로 나누어 입력값 전달

            for (var i in arr) {          //gyesoo에 계수 입력
                arr[i] = arr[i].trim();//공백 제거                                           
                if (arr[i].charAt(0) != 'x') gyesoo[i] = arr[i].charAt(0);//계수가 1이 아닐 때
                else gyesoo[i] = 1;//계수가 1일 때
                console.log("계수 : " + gyesoo[i]);
            }

            for (var i in arr) {            //chasoo에 차수 입력
                if (arr[i].indexOf('x') != -1) {//상수항이 아닐 때
                    if (arr[i].indexOf('^') != -1) chasoo[i] = arr[i].charAt(arr[i].indexOf('^') + 1);//차수가 1이 아닐 때                    
                    else chasoo[i] = 1;//차수가 1일 때
                }
                else chasoo[i] = 0;//상수항일 때
                console.log("차수 : " + chasoo[i]);
            }
        }

        var miboon = function () {
            for (var i in gyesoo) {
                gyesoo[i] *= chasoo[i];
                chasoo[i] -=1;
            }
            var result= new String;
            for(var i in gyesoo){
                if(gyesoo[i] != 0 && chasoo[i] > 1) result += gyesoo[i] + "x^" + chasoo[i] + " + ";
                else if(chasoo[i] == 1) result += gyesoo[i] + "x" + " + ";
                else if(chasoo[i] == 0) result += gyesoo[i];
            }
            document.write(result);
            
        }
    </script>

</head>

<body>
    <input id="input" type="text" value="예) 3x^4 +  2x^3 + x^2 + 2x + 4" style="width : 200px;">
    <input type="button" value="입력" onclick="arrange()">
    <input type="button" value="미분" onclick="miboon()">
</body>

</html>